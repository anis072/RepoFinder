<div class="table-container">
    <table mat-table [dataSource]="dataSource()()" class="mat-elevation-z2">
      @for (column of columns(); track column.columnDef) {
        <ng-container [matColumnDef]="column.columnDef">
          <th mat-header-cell *matHeaderCellDef class="header-cell">
            {{ column.header }}
          </th>
          <td mat-cell *matCellDef="let element" 
              [ngClass]="{'clickable': column.isClickable}" 
              (click)="onRowClick(element, column)" 
              [innerHTML]="column.cell(element)"
              class="data-cell">
          </td>
        </ng-container>
      }
      <tr mat-header-row *matHeaderRowDef="displayedColumns()" class="header-row"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns()" class="data-row"></tr>
    </table>
  
    @if (usePagination()) {
      <mat-paginator
        [length]="totalLength()"
        [pageSizeOptions]="pageSizeOptions"
        [pageSize]="pageSize()"
        [pageIndex]="pageIndex()"
        (page)="onPageChange($event)"
        showFirstLastButtons
        class="paginator"
      ></mat-paginator>
    }
  </div>